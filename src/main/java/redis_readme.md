# Redis直播房间模拟程序

该项目模拟了一个用户可在直播房间内进行的进入、退出、打赏操作，利用redis对其操作历史进行存储，并可进行统计反馈房间信息，打赏历史等信息。

该项目分为两部分。前端部分模拟用户操作：用户选择需要进行的操作，由前端部分读取向后端发送请求，并解析结果。后端部分模拟服务器：服务器接收前端发送的请求，对请求操作进行处理，并返回结果。

该项目实现的功能包括：实现对redis常用操作进行封装（封装的类型包括num，string，list，set，zset），实现FREQ周期统计功能，实现在json文件中对counter和action进行参数定义，实现在服务器上运行（使用springboot框架），实现对json文件变化进行监听。

## 前端部分

前端部分需要运行src/main/java/client/client.java。运行后用户可在命令行看到显示。用户可通过输入编号执行对应操作。需要运行后端后才能接受到反馈信息，否则会提示连接错误。

用户可进行的操作如下：

0：进入房间。输入用户名，模拟该用户进入房间。已在房间中的用户不可再次进入

1：退出房间。输入用户名，模拟该模拟用户退出房间。不在房间中的用户不可退出房间

2：打赏。输入用户名和打赏金额，模拟该用户在房间内进行打赏。不在房间中的用户不可进行打赏

3：房间描述。获得房间描述

4：总人数统计。获得房间内现存用户总数

5：给定时间内浏览人员。实现FREQ操作

6：打赏历史。显示该房间内打赏历史

7：打赏排行榜。按照累计打赏金额，显示打赏排行榜

8：清空历史记录。清空所有历史记录，系统重置。

9：退出。结束程序

## 后端部分

后端部分需要运行src/main/java/com/redis/project/ProjectApplication.java，运行后服务器启动。

用户如需修改服务器中counter的参数及action对应的操作，请在src\main\java\com\redis\project\config\文件夹中修改action.json和counter.json。文件的定义格式如下：

action.json:

```
{
  "action":[
    {
      "name": "action名称",
      "desc":"action描述",
      "counter": [
        "需要执行的counter操作名称",......
      ]
    },
    ......
}
```

counter.json:

```
{
  "counter": [
    {
      "name": "counter名称",
      "counterName": "需要执行的redis操作方法名",
      "desc": "counter操作描述",
      "key": "使用键值",
      "type": "操作数据类型",
      "value": "操作使用值",
      "expireTime": "过期时间"
    },
    ......
 }
```